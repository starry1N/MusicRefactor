# MusicFree Desktop - é‡æ„ç‰ˆ

**ä¸€ä¸ªé«˜æ€§èƒ½çš„æ’ä»¶åŒ–éŸ³ä¹æ’­æ”¾å™¨**  
é‡‡ç”¨ C++ åç«¯ + React å‰ç«¯çš„ç°ä»£æ¶æ„

---

## âœ¨ ä¸»è¦ç‰¹æ€§

- ğŸš€ **æé€Ÿæ€§èƒ½** - C++ æ ¸å¿ƒå¼•æ“ï¼Œå¯åŠ¨ < 1 ç§’
- ğŸ’¾ **ä½èµ„æºå ç”¨** - æ€»å†…å­˜å ç”¨ä»… 80-120MB
- ğŸ”Œ **æ’ä»¶åŒ–æ¶æ„** - çµæ´»çš„éŸ³ä¹æºæ‰©å±•ç³»ç»Ÿ
- ğŸ¨ **ç°ä»£åŒ– UI** - åŸºäº React çš„å“åº”å¼ç•Œé¢
- ğŸŒ **å›½é™…åŒ–æ”¯æŒ** - å¤šè¯­è¨€ç•Œé¢
- ğŸ“± **è·¨å¹³å°** - Windowsã€macOSã€Linux åŸç”Ÿæ”¯æŒ
- ğŸ” **éšç§ä¼˜å…ˆ** - æœ¬åœ°æ•°æ®ï¼Œæ— äº‘ç«¯è·Ÿè¸ª

## ğŸ“ é¡¹ç›®ç»“æ„

```
MusicFree-Refactor/
â”œâ”€â”€ backend/          # C++ åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/         # æºä»£ç 
â”‚   â”œâ”€â”€ include/     # å¤´æ–‡ä»¶
â”‚   â””â”€â”€ CMakeLists.txt
â”œâ”€â”€ frontend/        # React å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â””â”€â”€ package.json
â””â”€â”€ docs/           # æ–‡æ¡£
    â”œâ”€â”€ ARCHITECTURE.md
    â”œâ”€â”€ BUILD.md
    â””â”€â”€ API.md
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åç«¯ï¼ˆC++ æœåŠ¡ï¼‰

```bash
cd backend

# æ„å»º
mkdir build && cd build
cmake ..
cmake --build .

# è¿è¡Œ
./bin/musicfree_server 8888
```

### å‰ç«¯ï¼ˆReact åº”ç”¨ï¼‰

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼
npm run dev

# ç”Ÿäº§æ„å»º
npm run make
```

## ğŸ“š æ–‡æ¡£

- **[æ¶æ„è®¾è®¡](docs/ARCHITECTURE.md)** - ç³»ç»Ÿè®¾è®¡å’Œæ¨¡å—è¯´æ˜
- **[æ„å»ºæŒ‡å—](docs/BUILD.md)** - ç¼–è¯‘å’Œéƒ¨ç½²è¯´æ˜
- **[API æ–‡æ¡£](docs/API.md)** - REST API æ¥å£å®šä¹‰
- **[æ’ä»¶å¼€å‘](docs/PLUGIN_DEV.md)** - æ’ä»¶å¼€å‘æŒ‡å—

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

### åç«¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         REST API æœåŠ¡å™¨ (HTTP)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ ¸å¿ƒå¼•æ“å±‚                                  â”‚
â”‚  â”œâ”€ AudioEngine      (éŸ³é¢‘å¤„ç†)             â”‚
â”‚  â”œâ”€ PlaylistManager  (æ’­æ”¾åˆ—è¡¨)             â”‚
â”‚  â”œâ”€ PluginManager    (æ’ä»¶ç³»ç»Ÿ)             â”‚
â”‚  â””â”€ DatabaseManager  (æ•°æ®å­˜å‚¨)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åŸºç¡€åº“                                      â”‚
â”‚  â”œâ”€ FFmpeg           (éŸ³é¢‘ç¼–è§£ç )           â”‚
â”‚  â”œâ”€ SQLite3          (æœ¬åœ°æ•°æ®åº“)           â”‚
â”‚  â”œâ”€ libcurl          (ç½‘ç»œè¯·æ±‚)             â”‚
â”‚  â””â”€ OpenSSL          (åŠ å¯†)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å‰ç«¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Electron åº”ç”¨å£³                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       React ç”¨æˆ·ç•Œé¢                        â”‚
â”‚  â”œâ”€ Player          (æ’­æ”¾å™¨æ§åˆ¶)           â”‚
â”‚  â”œâ”€ Playlist        (æ’­æ”¾åˆ—è¡¨)             â”‚
â”‚  â”œâ”€ Search          (æœç´¢å‘ç°)             â”‚
â”‚  â””â”€ Settings        (è®¾ç½®)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       REST API å®¢æˆ·ç«¯                       â”‚
â”‚       â†“ HTTP é€šä¿¡ â†“                        â”‚
â”‚   http://127.0.0.1:8888/api                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”— é€šä¿¡åè®®

æ‰€æœ‰å‰åç«¯é€šä¿¡é€šè¿‡ REST API è¿›è¡Œï¼š

```
POST   /api/player/load      - åŠ è½½æ–‡ä»¶
POST   /api/player/play      - æ’­æ”¾
POST   /api/player/pause     - æš‚åœ
POST   /api/player/stop      - åœæ­¢
POST   /api/player/seek      - è·³è½¬
POST   /api/player/volume    - è°ƒèŠ‚éŸ³é‡
GET    /api/player/status    - è·å–çŠ¶æ€

GET    /api/playlist         - è·å–åˆ—è¡¨
POST   /api/playlist/add     - æ·»åŠ è½¨é“
DELETE /api/playlist/{id}    - åˆ é™¤è½¨é“

GET    /api/search?q=keyword - æœç´¢
GET    /api/favorites        - æ”¶è—åˆ—è¡¨
GET    /api/history          - æ’­æ”¾å†å²
```

è¯¦è§ [API æ–‡æ¡£](docs/API.md)

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | Electron åŸç‰ˆ | C++ é‡æ„ç‰ˆ | æ”¹è¿› |
|------|-------------|----------|------|
| å¯åŠ¨æ—¶é—´ | 2-3s | <1s | âœ… æ›´å¿« |
| å†…å­˜å ç”¨ | 200-300MB | 80-120MB | âœ… å‡å°‘ 60% |
| CPU å ç”¨ (ç©ºé—²) | 5-8% | <2% | âœ… æ›´ä½ |
| éŸ³ä¹æœç´¢ | 800ms | <500ms | âœ… æ›´å¿« |
| äºŒè¿›åˆ¶å¤§å° | 150MB | 40MB + 80MB | âœ… æ›´å° |

## ğŸ”Œ æ’ä»¶ç³»ç»Ÿ

æ’ä»¶ä½¿ç”¨ C++ å¼€å‘ï¼Œå®ç° `IPlugin` æ¥å£ï¼š

```cpp
class MyMusicPlugin : public IPlugin {
public:
    std::string getName() const override { return "MyMusic"; }
    std::string getVersion() const override { return "1.0.0"; }
    
    std::vector<Track> searchMusic(const std::string& query, int limit) override {
        // æœç´¢éŸ³ä¹
    }
    
    std::string getPlayUrl(const std::string& trackId) override {
        // è·å–æ’­æ”¾é“¾æ¥
    }
};
```

å†…ç½®æ’ä»¶ï¼š
- ğŸ“» **ç½‘æ˜“äº‘éŸ³ä¹** - æ”¯æŒæœç´¢ã€æ­Œå•ã€æ¦œå•
- ğŸµ **QQ éŸ³ä¹** - æµ·é‡éŸ³ä¹åº“
- ğŸ¶ **æœ¬åœ°æ–‡ä»¶** - æ‰«ææœ¬åœ°åº“

## ğŸ’» å¼€å‘æŒ‡å—

### åç«¯å¼€å‘

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆå¸¦è°ƒè¯•ç¬¦å·ï¼‰
cd backend
mkdir build && cd build
cmake -DCMAKE_BUILD_TYPE=Debug ..
cmake --build .
./bin/musicfree_server 8888

# ä½¿ç”¨ GDB è°ƒè¯•
gdb ./bin/musicfree_server
```

### å‰ç«¯å¼€å‘

```bash
# å¯åŠ¨å¼€å‘ç¯å¢ƒï¼ˆçƒ­é‡è½½ï¼‰
cd frontend
npm install
npm run dev

# ä½¿ç”¨ Chrome DevTools è°ƒè¯•
# Ctrl+Shift+I æ‰“å¼€å¼€å‘è€…å·¥å…·
```

### ç¼–å†™æ’ä»¶

è¯¦è§ [æ’ä»¶å¼€å‘æŒ‡å—](docs/PLUGIN_DEV.md)

## ğŸ“‹ ä¾èµ–è¦æ±‚

### åç«¯
- C++ 17 æ ‡å‡†
- CMake 3.16+
- FFmpeg 4.0+
- SQLite3 3.30+
- OpenSSL 1.1.1+

### å‰ç«¯
- Node.js 16+
- npm 8+ æˆ– yarn 3+
- React 18
- Electron 25+

## ğŸ› ï¸ ç¼–è¯‘æ”¯æŒ

| å¹³å° | ç¼–è¯‘å™¨ | çŠ¶æ€ |
|------|--------|------|
| Windows | MSVC 2019+ | âœ… å…¨æ”¯æŒ |
| macOS 12+ | Clang 13+ | âœ… å…¨æ”¯æŒ |
| Linux (Debian/Ubuntu) | GCC 10+ | âœ… å…¨æ”¯æŒ |
| Linux (Red Hat/Fedora) | GCC 10+ | âœ… å…¨æ”¯æŒ |

## ğŸ“œ è®¸å¯è¯

GPL-3.0 - è¯¦è§ [LICENSE](LICENSE)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿ Pull Requestï¼è¯·éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. å¼€å¯ Pull Request

## ğŸ“ è”ç³»æ–¹å¼

- **å®˜æ–¹ç½‘ç«™**: https://musicfree.dev
- **GitHub**: https://github.com/musicfree/musicfree-desktop
- **é—®é¢˜åé¦ˆ**: https://github.com/musicfree/musicfree-desktop/issues

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å’Œç”¨æˆ·çš„æ”¯æŒï¼

ç‰¹åˆ«æ„Ÿè°¢å¼€æºé¡¹ç›®ï¼š
- FFmpeg - éŸ³é¢‘å¤„ç†
- SQLite - æ•°æ®åº“
- Electron - æ¡Œé¢åº”ç”¨æ¡†æ¶
- React - UI æ¡†æ¶

---

**Made with â¤ï¸ by MusicFree Community**
